const userAvatar = async (d) => {
  let code = d.command.code;

  const inside = d.unpack();

  if (inside.inside) {
    const [id, size = "2048", dynamic = "yes"] = inside.splits;

    const user = await d.client.users.fetch(id).catch((err) => {});

    if (!user) return d.error(`‚ùå Invalid user ID in \`$userAvatar${inside}\``);

    code = code.replaceLast(
      `$userAvatar${inside}`,
      user.displayAvatarURL({
        dynamic: dynamic === "yes" ? true : false,
        size: Number(size),
      })
    );
  } else {
    code = code.replaceLast(
      "$userAvatar",
      d.message.author.displayAvatarURL({ dynamic: true, size: 4096 })
    );
  }

  return {
    code: code,
  };
};

module.exports = userAvatar;
